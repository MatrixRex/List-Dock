@import "tailwindcss";

@theme {
  --font-sans: "Space Mono", monospace;
  --font-mono: "Space Mono", monospace;
  --color-gray-900: #111827;
  --color-gray-800: #1f2937;
  --color-gray-700: #374151;
  --color-gray-100: #f3f4f6;
}

@layer base {
  *, ::before, ::after {
    font-family: "Space Mono", monospace !important;
    letter-spacing: 0.02em;
  }

  html {
    background-color: #050408;
    background-image: 
      /* 1. TOP LAYER: Tactical Grid */
      linear-gradient(rgba(255, 255, 255, 0.08) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255, 255, 255, 0.08) 1px, transparent 1px),
      /* 2. MIDDLE LAYER: Grain Noise */
      url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.25' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E"),
      /* 3. BOTTOM LAYER: Mesh Gradients */
      radial-gradient(at 0% 0%, rgba(184, 149, 177, 0.25) 0px, transparent 80%),
      radial-gradient(at 100% 100%, rgba(62, 26, 108, 0.3) 0px, transparent 80%),
      radial-gradient(at 50% 50%, rgba(34, 13, 82, 0.15) 0px, transparent 100%),
      radial-gradient(at 100% 20%, rgba(68, 38, 126, 0.1) 0px, transparent 80%);
    background-size: 40px 40px, 40px 40px, 100px 100px, 100% 100%, 100% 100%, 100% 100%, 100% 100%;
    background-attachment: fixed;
    background-blend-mode: normal, normal, overlay, normal, normal, normal, normal;
  }

  /* Global Spotlight Logic */
  @property --mouse-x {
    syntax: '<length>';
    initial-value: -1000px;
    inherits: true;
  }
  @property --mouse-y {
    syntax: '<length>';
    initial-value: -1000px;
    inherits: true;
  }

  html {
    transition: --mouse-x 0.5s cubic-bezier(0.16, 1, 0.3, 1), --mouse-y 0.5s cubic-bezier(0.16, 1, 0.3, 1);
  }

  body, #root {
    background: transparent !important;
    position: relative;
    z-index: 10;
    @apply text-gray-100;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
    min-height: 100vh;
  }
}

/* Custom Glossy Utilities */
@utility glass {
  position: relative;
  background: rgba(40, 40, 40, 0.2);
  backdrop-filter: blur(2px) !important;
  border: 1px solid rgba(255, 255, 255, 0.08);
}

@utility glass-bottom-only {
  border-top: none !important;
  border-left: none !important;
  border-right: none !important;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08) !important;
  border-radius: 0 !important;
}

@utility glass-top-only {
  border-bottom: none !important;
  border-left: none !important;
  border-right: none !important;
  border-top: 1px solid rgba(255, 255, 255, 0.08) !important;
  border-radius: 0 !important;
}

/* The actual spotlight border layer (GLOBAL MOUSE FOCUS) */
.glass::before,
.glass-bottom-only::before,
.glass-top-only::before,
[data-sonner-toast]::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: 1px; /* This defines the border thickness for the mask */
  background: radial-gradient(
    350px circle at var(--mouse-x) var(--mouse-y), 
    rgba(255, 255, 255, 0.45) 0%, 
    rgba(255, 255, 255, 0.1) 45%,
    transparent 100%
  );
  background-attachment: fixed;
  
  /* Strict Border Mask: Only show what is IN the padding area */
  -webkit-mask: linear-gradient(#fff, #fff) content-box, linear-gradient(#fff, #fff) border-box;
  mask: linear-gradient(#fff, #fff) content-box, linear-gradient(#fff, #fff) border-box;
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  
  pointer-events: none;
  z-index: 20; /* Ensure it stays above content borders */
  transition: opacity 0.2s ease-out;
}

/* Hide spotlight border on hover */
.glass:hover::before,
.glass-bottom-only:hover::before,
.glass-top-only:hover::before {
  opacity: 0;
}

/* Variant for Header: Only bottom border glows/exists */
.glass-bottom-only::before {
  padding-top: 0 !important;
  padding-left: 0 !important;
  padding-right: 0 !important;
  padding-bottom: 1px !important;
  border-radius: 0 !important;
}

/* Variant for Footer: Only top border glows/exists */
.glass-top-only::before {
  padding-bottom: 0 !important;
  padding-left: 0 !important;
  padding-right: 0 !important;
  padding-top: 1px !important;
  border-radius: 0 !important;
}

/* Sonner Toast Styling */
@layer base {
  [data-sonner-toast] {
    @apply !glass !shadow-2xl;
    backdrop-filter: blur(12px) !important;
    border-radius: 12px !important;
    padding: 0 !important;
    font-family: "Space Mono", monospace !important;
    overflow: hidden !important;
    min-width: 320px !important;
    background: rgba(15, 12, 20, 1) !important;
  }

  /* Standard toasts have a title, custom ones (UndoToast) don't use [data-title] */
  [data-sonner-toast]:has([data-title]) {
    padding: 12px 16px !important;
  }

  [data-sonner-toast] [data-icon] {
    margin-right: 12px !important;
  }

  [data-sonner-toast] [data-title] {
    @apply !text-gray-100 !font-medium;
    font-family: "Space Mono", monospace !important;
  }

  [data-sonner-toast][data-type="success"] {
    background: rgba(34, 197, 94, 0.1) !important;
    border: 1px solid rgba(34, 197, 94, 0.2) !important;
  }

  [data-sonner-toast][data-type="error"] {
    background: rgba(239, 68, 68, 0.1) !important;
    border: 1px solid rgba(239, 68, 68, 0.2) !important;
  }
}

/* Custom Scrollbar */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.2);
}
